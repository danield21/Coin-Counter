{"version":3,"sources":["webpack:///./web/js/api/language.js","webpack:///./web/js/component/coin.js","webpack:///./web/js/component/scoreboard.js","webpack:///./web/js/coordinate.js","webpack:///./web/js/counter.js","webpack:///./web/js/component/draggable.js","webpack:///./web/js/component/dish.js","webpack:///./web/js/dispense.js","webpack:///./web/js/api/messages.js","webpack:///./web/js/page/exercise.js","webpack:///./web/js/api/currency.js"],"names":["__webpack_require__","d","__webpack_exports__","fetchLanguage","_errors__WEBPACK_IMPORTED_MODULE_0__","_index__WEBPACK_IMPORTED_MODULE_1__","_fetch__WEBPACK_IMPORTED_MODULE_2__","async","locale","index","Object","i","languages","language","code","url","CoinComponent","[object Object]","coin","this","element","document","createElement","skipFlip","setAttribute","size","append","createCoinSide","classList","toggle","angle","first","firstChild","second","nextSibling","side","images","TypeError","wrapper","img","name","scoreboard_ScoreboardComponent","messages","rounds","start","Date","value","coins","push","end","totalDiff","history","length","row","total","j","diff","createTextElement","get","formatValue","time","final","drifter","milli","seconds","Math","floor","minutes","hours","format","formatTime","refreshButton","createTextNode","addEventListener","e","preventDefault","window","location","reload","absolute","abs","numbers","split","unshift","splice","join","text","Coordinate","x","y","other","n","ZERO","Counter","max","current","triggered","callbacks","console","error","func","DRAG_LIMIT","draggable_DraggableComponent","position","appendChild","movement","setPosition","points","Map","actions","move","createFromPointer","point","pointerId","subtract","forEach","add","average","divide","count","createPointerMove","up","createPointerUp","cancel","passive","body","offset","rect","getBoundingClientRect","left","scrollX","top","scrollY","parentRect","parentElement","parentAbsolute","createRelativeCoordinateFromElement","set","createPointerDown","callback","onLimit","coords","event","pageX","pageY","vibrate","delete","pointerType","click","removeEventListener","removeAttribute","remove","navigator","reset","dish_DishComponent","frag","createDocumentFragment","remaining","height","offsetHeight","width","offsetWidth","mmElem","mmRatio","removeChild","realSize","hypoSize","sqrt","random","rotate","flip","draggable","onDrag","type","sibling","nextElementSibling","insertBefore","onClick","dispense","sortedCoins","concat","sort","c1","c2","chosen","createMap","obj","map","key","exercise","TOTAL_ROUNDS","region","localStorage","setItem","api_language","api","currencies","currency","fetch","errors","fetchCurrency","core","fetchCoreLanguage","scoreboard","generateValue","dish","currentRound","topBar","h1","home","title","bottomBar","input","button","replace","generate","attached","round","weight"],"mappings":"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","file":"2.script.js","sourcesContent":["import {NotFoundError} from './errors'\r\nimport {fetchIndex} from './index'\r\nimport {fetch} from './fetch'\r\n\r\n/**\r\n * @typedef {{\r\n * \ttitle: string\r\n * \turl: string\r\n * \tcurrencies: {\r\n * \t\tcode: string\r\n * \t\ttitle: string\r\n * \t\turl: string\r\n * \t}[]\r\n * }} LanguageResponse\r\n */\r\n\r\n/**\r\n * \r\n * @param {string} locale \r\n * @returns {Promise<LanguageResponse>}\r\n */\r\nexport async function fetchLanguage(locale) {\r\n\tconst index = await fetchIndex()\r\n\t\r\n\tfor(let i in index.languages) {\r\n\t\tconst language = index.languages[i]\r\n\t\tif(locale === language.code) {\r\n\t\t\treturn await fetch(language.url)\r\n\t\t}\r\n\t}\r\n\r\n\tthrow new NotFoundError(`Locale ${locale} not found`)\r\n}","/* This Source Code Form is subject to the terms of the Mozilla Public\r\n * License, v. 2.0. If a copy of the MPL was not distributed with this\r\n * file, You can obtain one at https://mozilla.org/MPL/2.0/. */\r\n\r\n/**\r\n * A Coin Component contains a HTML representation of the coin.\r\n * In order to attach it to the DOM, use the `element` property.\r\n */\r\nexport class CoinComponent {\r\n\t/**\r\n\t * Creates a Coin Component\r\n\t * @param {{name: string, value: number, size: number, images: {front: string, back: string}}} coin contains the information required to render a coin\r\n\t */\r\n\tconstructor(coin) {\r\n\t\t/**\r\n\t\t * @member {HTMLDivElement} element is a HTML representation of the coin\r\n\t\t */\r\n\t\tthis.element = document.createElement('div')\r\n\t\t/**\r\n\t\t * @member {boolean} skipFlip if set to `true`, then the next flip is skipped and this value is reset\r\n\t\t */\r\n\t\tthis.skipFlip = false\r\n\r\n\t\tthis.element.setAttribute('class', 'coin')\r\n\t\tthis.element.setAttribute('style', `width: ${coin.size}mm; height: ${coin.size}mm;`)\r\n\r\n\t\tthis.element.append(createCoinSide(coin, 'front'))\r\n\t\tthis.element.append(createCoinSide(coin, 'back'))\r\n\t}\r\n\r\n\t/**\r\n\t * Toggles the `coin--face-down` class\r\n\t * If `this.skipFlip` is set to true, the next flip is skipped and `this.skipFlip` is reset\r\n\t */\r\n\tflip() {\r\n\t\tif(this.skipFlip) {\r\n\t\t\tthis.skipFlip = false\r\n\t\t\treturn\r\n\t\t}\r\n\t\tthis.element.classList.toggle('coin--face-down')\r\n\t}\r\n\r\n\t/**\r\n\t * Rotates the coin to the set angle\r\n\t * @param {number} angle \r\n\t */\r\n\trotate(angle) {\r\n\t\tconst first = this.element.firstChild;\r\n\t\tconst second = first.nextSibling;\r\n\t\tfirst.firstChild.setAttribute('style', `transform: rotate(${angle}deg)`)\r\n\t\tsecond.firstChild.setAttribute('style', `transform: rotate(${angle}deg)`)\r\n\t}\r\n}\r\n\r\n/**\r\n * \r\n * @param {{name: string, value: number, size: number, images: {front: string, back: string}}} coin \r\n * @param {string} side Should be a property that coin.images has, such as `front` or `back`\r\n * @returns {HTMLDivElement}\r\n */\r\nfunction createCoinSide(coin, side) {\r\n\tif(!(side in coin.images)) {\r\n\t\tthrow new TypeError('Excepted only the strings \"front\" or \"back')\r\n\t}\r\n\r\n\tconst wrapper = document.createElement('div')\r\n\twrapper.setAttribute('class', `coin__${side}`)\r\n\r\n\tconst img = document.createElement('img')\r\n\timg.setAttribute('src', coin.images[side])\r\n\timg.setAttribute('alt', coin.name)\r\n\timg.setAttribute('class', 'coin__img')\r\n\twrapper.append(img)\r\n\r\n\treturn wrapper\r\n}\r\n","/* This Source Code Form is subject to the terms of the Mozilla Public\r\n * License, v. 2.0. If a copy of the MPL was not distributed with this\r\n * file, You can obtain one at https://mozilla.org/MPL/2.0/. */\r\n\r\nimport { CoinComponent } from \"./coin\"\r\n\r\nexport class ScoreboardComponent {\r\n\t/**\r\n\t * \r\n\t * @param {Map<string, string>} messages \r\n\t */\r\n\tconstructor(messages) {\r\n\t\tthis.element = document.createElement('div')\r\n\t\tthis.element.setAttribute('class', 'scoreboard')\r\n\t\tthis.rounds = []\r\n\t\tthis.start = new Date()\r\n\t\tthis.messages = messages\r\n\t}\r\n\r\n\tadd(value, coins) {\r\n\t\tthis.rounds.push({value, coins})\r\n\t}\r\n\r\n\tgenerate() {\r\n\t\tconst end = new Date()\r\n\t\tlet totalDiff = 0;\r\n\r\n\t\tconst history = document.createElement('div')\r\n\t\thistory.setAttribute('class', 'scoreboard__history')\r\n\r\n\t\tfor(let i = 0; i < this.rounds.length; ++i) {\r\n\t\t\tlet {value, coins} = this.rounds[i]\r\n\r\n\t\t\tconst row = document.createElement('div')\r\n\t\t\trow.setAttribute('class', 'scoreboard__row')\r\n\r\n\t\t\tlet total = 0\r\n\t\t\tfor(let j = 0; j < coins.length; ++j) {\r\n\t\t\t\ttotal += coins[j].value\r\n\t\t\t\tconst coin = new CoinComponent(coins[j])\r\n\t\t\t\trow.append(coin.element)\r\n\t\t\t}\r\n\r\n\t\t\tconst diff = total - value\r\n\t\t\ttotalDiff += diff\r\n\r\n\t\t\thistory.append(row,\r\n\t\t\t\tcreateTextElement(this.messages.get('your-answer') + ': ' + formatValue(value)),\r\n\t\t\t\tcreateTextElement(this.messages.get('correct-answer') + ': ' + formatValue(total)),\r\n\t\t\t\tcreateTextElement(this.messages.get('difference') + ': ' + formatValue(diff))\r\n\t\t\t)\r\n\t\t}\r\n\r\n\t\tconst time = end - this.start\r\n\t\tconst final = document.createElement('div')\r\n\t\tfinal.setAttribute('class', 'scoreboard__score')\r\n\t\tfinal.append(\r\n\t\t\tcreateTextElement(this.messages.get('final-difference') + ': ' + formatValue(totalDiff)),\r\n\t\t\tcreateTextElement(this.messages.get('final-time') + ': ' + formatTime(time))\r\n\t\t)\r\n\r\n\t\tconst refreshButton = document.createElement('button')\r\n\t\trefreshButton.setAttribute('class', 'scoreboard__button')\r\n\t\trefreshButton.append(document.createTextNode(this.messages.get('try-again')))\r\n\t\trefreshButton.addEventListener('click', e => {\r\n\t\t\te.preventDefault()\r\n\t\t\twindow.location.reload()\r\n\t\t})\r\n\r\n\t\tthis.element.append(final, refreshButton, history)\r\n\t}\r\n}\r\n\r\nfunction formatValue(value) {\r\n\tconst absolute = Math.abs(value)\r\n\tconst numbers = (\"\"+absolute).split('')\r\n\r\n\tif(absolute < 100) {\r\n\t\tnumbers.unshift('0')\r\n\t}\r\n\tif(absolute < 10) {\r\n\t\tnumbers.unshift('0')\r\n\t}\r\n\tif(value < 0) {\r\n\t\tnumbers.unshift('-')\r\n\t}\r\n\r\n\tnumbers.splice(numbers.length-2, 0, '.')\r\n\treturn numbers.join('')\r\n}\r\n\r\nfunction formatTime(time) {\r\n\tlet drifter = time\r\n\tconst milli = drifter % 1000\r\n\tdrifter = Math.floor(drifter/1000)\r\n\tconst seconds = drifter % 60\r\n\tdrifter = Math.floor(drifter/60)\r\n\tconst minutes = drifter % 60\r\n\tconst hours = Math.floor(drifter/60)\r\n\r\n\tlet format = \"\"\r\n\tif(hours > 0) {\r\n\t\tformat += hours + \":\"\r\n\t}\r\n\t\r\n\tif(minutes > 0) {\r\n\t\tif(hours > 0) {\r\n\t\t\tformat += minutes < 10 ? `0${minutes}:` : `${minutes}:`\r\n\t\t} else {\r\n\t\t\tformat += minutes + ':'\r\n\t\t}\r\n\t}\r\n\t\r\n\tif(minutes > 0) {\r\n\t\tformat += seconds < 10 ? `0${seconds}:` : `${seconds}.`\r\n\t} else {\r\n\t\tformat += seconds + '.'\r\n\t}\r\n\t\r\n\tformat += milli < 10 ? `00${milli}` : milli < 100 ? `0${milli}` : \"\"+milli\r\n\r\n\treturn format\r\n}\r\n\r\nfunction createTextElement(text) {\r\n\tconst element = document.createElement('span')\r\n\telement.setAttribute('class', 'scoreboard__text')\r\n\telement.append(text)\r\n\treturn element\r\n}\r\n","/* This Source Code Form is subject to the terms of the Mozilla Public\r\n * License, v. 2.0. If a copy of the MPL was not distributed with this\r\n * file, You can obtain one at https://mozilla.org/MPL/2.0/. */\r\n\r\n /**\r\n  * Coordinate defines various operations used for coordinates\r\n  */\r\nexport class Coordinate {\r\n\t/**\r\n\t * Creates a Coordinate based on the given parameters\r\n\t * @param {number} x \r\n\t * @param {number} y \r\n\t */\r\n\tconstructor(x, y) {\r\n\t\tthis.x = x\r\n\t\tthis.y = y\r\n\t}\r\n\r\n\t/**\r\n\t * Adds two coordinate together\r\n\t * @param {Coordinate} other\r\n\t */\r\n\tadd(other) {\r\n\t\treturn new Coordinate(this.x + other.x, this.y + other.y)\r\n\t}\r\n\r\n\t/**\r\n\t * Diffs two coordinate\r\n\t * @param {Coordinate} other\r\n\t */\r\n\tsubtract(other) {\r\n\t\treturn new Coordinate(this.x - other.x, this.y - other.y)\r\n\t}\r\n\r\n\t/**\r\n\t * Mutliples the coordinate by a factor\r\n\t * @param {number} n \r\n\t */\r\n\tmutliply(n) {\r\n\t\treturn new Coordinate(this.x * n, this.y * n)\r\n\t}\r\n\r\n\t/**\r\n\t * Divides the coordinate by a factor\r\n\t * @param {number} n \r\n\t */\r\n\tdivide(n) {\r\n\t\treturn new Coordinate(this.x / n, this.y / n)\r\n\t}\r\n}\r\n\r\n/**\r\n * Represents the coordinate found at (0, 0)\r\n */\r\nCoordinate.ZERO = new Coordinate(0, 0)","export class Counter {\r\n\tconstructor(max) {\r\n\t\tthis.current = 0\r\n\t\t\r\n\t\tthis.max = max\r\n\t\tthis.triggered = false\r\n\t\tthis.callbacks = []\r\n\t}\r\n\r\n\tcount() {\r\n\t\tif(this.triggered) {\r\n\t\t\treturn\r\n\t\t}\r\n\t\t\r\n\t\tif(this.current >= this.max) {\r\n\t\t\tthis.triggered = true\r\n\t\t\tfor(let i = 0; i < this.callbacks.length; ++i) {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tthis.callbacks[i]()\r\n\t\t\t\t} catch(e) {\r\n\t\t\t\t\tconsole.error(e)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tthis.current++\r\n\t\t}\r\n\t}\r\n\r\n\treset() {\r\n\t\tthis.triggered = false\r\n\t\tthis.current = 0\r\n\t}\r\n\r\n\tonLimit(func) {\r\n\t\tif(typeof func !== 'function') {\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\tthis.callbacks.push(func)\r\n\t}\r\n}","/* This Source Code Form is subject to the terms of the Mozilla Public\r\n * License, v. 2.0. If a copy of the MPL was not distributed with this\r\n * file, You can obtain one at https://mozilla.org/MPL/2.0/. */\r\n\r\nimport {Coordinate} from '../coordinate'\r\nimport {Counter} from '../counter'\r\n\r\n/**\r\n * DRAG_LIMIT is the maximum amount of movement allowed before it is registered as a drag\r\n */\r\nconst DRAG_LIMIT = 1\r\n\r\n/**\r\n * DraggableComponent allows the given element to be dragged around\r\n */\r\nexport class DraggableComponent {\r\n\t/**\r\n\t * Creates a draggable component that wraps around the given element\r\n\t * as well as at the given coordinate\r\n\t * @param {HTMLElement} element \r\n\t * @param {Coordinate} position \r\n\t */\r\n\tconstructor(element, position) {\r\n\t\tthis.element = document.createElement('div')\r\n\t\tthis.element.appendChild(element)\r\n\t\tthis.element.setAttribute('class', 'draggable')\r\n\t\tthis.movement = new Counter(DRAG_LIMIT)\r\n\r\n\t\tsetPosition(this.element, position)\r\n\r\n\t\t/**\r\n\t\t * @type {Map<number, {current: Coordinate, diff: Coordinate}>}\r\n\t\t */\r\n\t\tconst points = new Map()\r\n\r\n\t\tconst actions = {}\r\n\t\tactions.move = createPointerMove(this.element, points, this.movement)\r\n\t\tactions.up = createPointerUp(this.element, points, this.movement, true, actions)\r\n\t\tactions.cancel = createPointerUp(this.element, points, this.movement, false, actions)\r\n\r\n\t\tthis.element.addEventListener('pointerdown', createPointerDown(this.element, points, actions))\r\n\t}\r\n\r\n\tonDrag(callback) {\r\n\t\tthis.movement.onLimit(callback)\r\n\t}\r\n\r\n\tonClick(callback) {\r\n\t\tthis.element.addEventListener('click', callback)\r\n\t}\r\n}\r\n\r\n/**\r\n * Sets the element at the specified position using the CSS trans\r\n * @param {HTMLElement} element\r\n * @param {Coordinate} coords \r\n */\r\nfunction setPosition(element, coords) {\r\n\telement.setAttribute('style', `transform: translateY(${coords.y}px) translateX(${coords.x}px)`)\r\n}\r\n\r\n/**\r\n * Calculates the coordinates the element is at relative to its parent\r\n * @param {HTMLElement} element \r\n * @returns {Coordinate}\r\n */\r\nfunction createRelativeCoordinateFromElement(element) {\r\n\tconst rect = element.getBoundingClientRect()\r\n\tconst absolute = new Coordinate(rect.left + window.scrollX, rect.top + window.scrollY)\r\n\tconst parentRect = element.parentElement.getBoundingClientRect()\r\n\tconst parentAbsolute = new Coordinate(parentRect.left + window.scrollX, parentRect.top + window.scrollY)\r\n\treturn absolute.subtract(parentAbsolute)\r\n}\r\n\r\n/**\r\n * Calculates the coordinates based on on the pointer event\r\n * @param {PointerEvent} event\r\n * @returns {Coordinate}\r\n */\r\nfunction createFromPointer(event) {\r\n\treturn new Coordinate(event.pageX, event.pageY)\r\n}\r\n\r\nfunction createPointerDown(element, points, actions) {\r\n\treturn function (e) {\r\n\t\te.preventDefault()\r\n\r\n\t\tif(points.size == 0) {\r\n\t\t\twindow.addEventListener('pointermove', actions.move, { passive: false })\r\n\t\t\twindow.addEventListener('pointerup', actions.up, { passive: false })\r\n\t\t\twindow.addEventListener('pointercancel', actions.cancel, { passive: false })\r\n\t\t\tdocument.body.setAttribute('touch-action', 'none')\r\n\t\t}\r\n\r\n\t\tconst offset = createRelativeCoordinateFromElement(this)\r\n\t\tconst current = createFromPointer(e)\r\n\t\tconst diff = current.subtract(offset)\r\n\r\n\t\telement.classList.add('draggable--lifted')\r\n\t\tpoints.set(e.pointerId, {diff, current})\r\n\t}\r\n}\r\n\r\nfunction createPointerMove(element, points, movement) {\r\n\treturn function (e) {\r\n\t\te.preventDefault()\r\n\r\n\t\tconst current = createFromPointer(e)\r\n\r\n\t\tvar point = points.get(e.pointerId)\r\n\t\tif(point == null) {\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\tpoint.current = current.subtract(point.diff)\r\n\t\t\t\r\n\t\tlet total = Coordinate.ZERO\r\n\t\tpoints.forEach(({current}) => {\r\n\t\t\ttotal = total.add(current)\r\n\t\t})\r\n\r\n\t\tconst average = total.divide(points.size)\r\n\t\tsetPosition(element, average)\r\n\r\n\t\tmovement.count()\r\n\t}\r\n}\r\n\r\nfunction createPointerUp(element, points, movement, vibrate, actions) {\r\n\treturn function (e) {\r\n\t\te.preventDefault()\r\n\r\n\t\tpoints.delete(e.pointerId)\r\n\r\n\t\tif(points.size > 0) {\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\tif(e.pointerType !== 'mouse' && movement.triggered) {\r\n\t\t\telement.click()\r\n\t\t}\r\n\r\n\t\twindow.removeEventListener('pointermove', actions.move)\r\n\t\twindow.removeEventListener('pointerup', actions.up)\r\n\t\twindow.removeEventListener('pointercancel', actions.cancel)\r\n\t\tdocument.body.removeAttribute('touch-action')\r\n\r\n\t\telement.classList.remove('draggable--lifted')\r\n\r\n\t\tif(vibrate && 'vibrate' in window.navigator) {\r\n\t\t\twindow.navigator.vibrate(10)\r\n\t\t}\r\n\r\n\t\tmovement.reset()\r\n\t}\r\n}\r\n","/* This Source Code Form is subject to the terms of the Mozilla Public\r\n * License, v. 2.0. If a copy of the MPL was not distributed with this\r\n * file, You can obtain one at https://mozilla.org/MPL/2.0/. */\r\n\r\nimport {CoinComponent} from './coin'\r\nimport {DraggableComponent} from './draggable'\r\n\r\n/**\r\n * Manages a DOM element that contains coins and allows such coins to be dragged around\r\n */\r\nexport class DishComponent {\r\n\t/**\r\n\t * Creates a dish based on the coins that are passed\r\n\t * @param {{name: string, value: number, size: number, images: {front: string, back: string}}[]}coins \r\n\t * @param {number} value \r\n\t */\r\n\tconstructor(coins) {\r\n\t\tthis.element = document.createElement('div')\r\n\t\tthis.element.setAttribute('class', 'dish')\r\n\t\tthis.coins = coins\r\n\t}\r\n\r\n\t/**\r\n\t * Renders the coin.\r\n\t * Only call this method after attached to the DOM\r\n\t */\r\n\tgenerate() {\r\n\t\tconst frag = document.createDocumentFragment()\r\n\r\n\t\tlet remaining = this.value\r\n\t\tconst height = this.element.offsetHeight\r\n\t\tconst width = this.element.offsetWidth\r\n\t\t\r\n\t\tconst mmElem = document.createElement('div')\r\n\t\tmmElem.setAttribute('style', 'width: 100mm;')\r\n\t\tthis.element.append(mmElem)\r\n\t\tconst mmRatio = mmElem.offsetWidth / 100;\r\n\t\tthis.element.removeChild(mmElem)\r\n\r\n\t\tfor(let i = 0; i < this.coins.length; ++i) {\r\n\t\t\tif(this.coins[i].value > remaining) {\r\n\t\t\t\ti++\r\n\t\t\t\tcontinue\r\n\t\t\t}\r\n\r\n\t\t\tconst realSize = this.coins[i].size*mmRatio;\r\n\t\t\tconst hypoSize = Math.sqrt(2*realSize*realSize)\r\n\t\t\tconst position = {\r\n\t\t\t\tx: (width > hypoSize ? width - hypoSize : 0)*Math.random(),\r\n\t\t\t\ty: (height > hypoSize ? height - hypoSize : 0)*Math.random(),\r\n\t\t\t\trotate: 360*Math.random()\r\n\t\t\t}\r\n\r\n\t\t\tconst coin = new CoinComponent(this.coins[i])\r\n\t\t\tcoin.rotate(position.rotate)\r\n\t\t\tif(Math.random() >= 0.5) {\r\n\t\t\t\tcoin.flip()\r\n\t\t\t}\r\n\r\n\t\t\tconst draggable = new DraggableComponent(coin.element, position)\r\n\t\t\tdraggable.element.classList.add('coin-wrapper')\r\n\t\t\tdraggable.onDrag(type => {\r\n\t\t\t\tcoin.skipFlip = true\r\n\r\n\t\t\t\tlet sibling = draggable.element.nextElementSibling\r\n\t\t\t\twhile(sibling != null) {\r\n\t\t\t\t\tthis.element.insertBefore(sibling, draggable.element)\r\n\t\t\t\t\tsibling = sibling.nextElementSibling\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\tdraggable.onClick(e => {\r\n\t\t\t\tcoin.flip()\r\n\t\t\t})\r\n\t\t\tfrag.append(draggable.element)\r\n\r\n\t\t\tremaining -= this.coins[i].value\r\n\t\t}\r\n\r\n\t\tthis.element.append(frag)\r\n\t}\r\n}","/* This Source Code Form is subject to the terms of the Mozilla Public\r\n * License, v. 2.0. If a copy of the MPL was not distributed with this\r\n * file, You can obtain one at https://mozilla.org/MPL/2.0/. */\r\n\r\n /**\r\n  * Calculates the necessary coins to be given based on the set of coins\r\n  * @param {{name: string, value: number, size: number, images: {front: string, back: string}}[]} coins \r\n  * @param {number} value \r\n  */\r\nexport function dispense(coins, value) {\r\n\tconst sortedCoins = coins.concat()\r\n\tsortedCoins.sort((c1, c2) => c2.value - c1.value)\r\n\r\n\tconst chosen = []\r\n\tlet i = 0;\r\n\twhile(value > 0 && i < sortedCoins.length) {\r\n\t\tif(sortedCoins[i].value > value) {\r\n\t\t\ti++\r\n\t\t\tcontinue\r\n\t\t}\r\n\r\n\t\tchosen.push(sortedCoins[i])\r\n\t\tvalue -= sortedCoins[i].value\r\n\t}\r\n\treturn chosen\r\n}\r\n","import {NotFoundError} from './errors'\r\nimport {fetchLanguage} from './language'\r\nimport {fetch} from './fetch'\r\n\r\n/**\r\n * @typedef {Map<string, string>} MessagesResponse\r\n */\r\n\r\n/**\r\n * \r\n * @param {string} locale \r\n * @returns {Promise<MessagesResponse>}\r\n */\r\nexport async function fetchCoreLanguage(locale) {\r\n\tconst language = await fetchLanguage(locale)\r\n\t\r\n\tconst messages = await fetch(language.url)\r\n\r\n\treturn createMap(messages)\r\n}\r\n\r\n/**\r\n * \r\n * @param {string} locale \r\n * @param {string} region \r\n * @returns {Promise<MessagesResponse>}\r\n */\r\nexport async function fetchCurrencyLanguage(locale, region) {\r\n\tconst language = await fetchLanguage(locale)\r\n\t\r\n\tfor(let i in language.currencies) {\r\n\t\tconst currency = language.currencies[i]\r\n\t\tif(region === currency.region) {\r\n\t\t\tconst messages = await fetch(currency.url)\r\n\t\t\treturn createMap(messages)\r\n\t\t}\r\n\t}\r\n\r\n\tthrow new NotFoundError(`Region ${region} not found`)\r\n}\r\n\r\n/**\r\n * \r\n * @param {*} obj \r\n * @returns {Map<string, string>}\r\n */\r\nfunction createMap(obj) {\r\n\tconst map = new Map()\r\n\r\n\tif(obj == null) {\r\n\t\treturn map\r\n\t}\r\n\r\n\tfor(let key in obj) {\r\n\t\tmap.set(key, obj[key])\r\n\t}\r\n\r\n\treturn map\r\n}","import {ScoreboardComponent} from '../component/scoreboard'\r\nimport {DishComponent} from '../component/dish'\r\nimport {dispense} from '../dispense'\r\nimport {fetchCurrency} from '../api/currency'\r\nimport {fetchLanguage} from '../api/language'\r\nimport {fetchCoreLanguage} from '../api/messages'\r\n\r\nconst TOTAL_ROUNDS = 10\r\n\r\nexport default async function exercise({locale, region}) {\r\n\tlocalStorage.setItem('lang', locale)\r\n\r\n\tconst language = await fetchLanguage(locale)\r\n\tconst set = await fetchCurrency(region)\r\n\tconst core = await fetchCoreLanguage(locale)\r\n\r\n\tconst scoreboard = new ScoreboardComponent(core)\r\n\tconst value = generateValue(set)\r\n\tlet coins = dispense(set.currency, value)\r\n\tlet dish = new DishComponent(coins)\r\n\tlet currentRound = 1\r\n\r\n\tconst topBar = document.createElement('div')\r\n\ttopBar.setAttribute('class', 'exercise__top')\r\n\r\n\tconst h1 = document.createElement('h1')\r\n\th1.setAttribute('class', 'exercise__header')\r\n\ttopBar.append(h1)\r\n\r\n\tconst home = document.createElement('a')\r\n\thome.setAttribute('href', '/')\r\n\thome.append(document.createTextNode(language.title))\r\n\th1.append(home)\r\n\r\n\tconst bottomBar = document.createElement('form')\r\n\tbottomBar.setAttribute('class', 'exercise__bottom')\r\n\r\n\tconst input = document.createElement('input')\r\n\tinput.setAttribute('name', 'value')\r\n\tinput.setAttribute('type', 'number')\r\n\tinput.setAttribute('min', '0')\r\n\tinput.setAttribute('step', '0.01')\r\n\tinput.setAttribute('class', 'exercise__input')\r\n\r\n\tconst button = document.createElement('button')\r\n\tbutton.setAttribute('class', 'exercise__button')\r\n\tbutton.append(document.createTextNode(core.get('submit')))\r\n\r\n\tbottomBar.append(input, button)\r\n\r\n\tbottomBar.addEventListener('submit', e => {\r\n\t\te.preventDefault()\r\n\r\n\t\tconst value = +input.value.replace(/\\./, '')\r\n\t\tscoreboard.add(value, coins)\r\n\r\n\t\tinput.value = \"\"\r\n\t\tdocument.body.removeChild(dish.element)\r\n\r\n\t\tif(currentRound < TOTAL_ROUNDS) {\r\n\t\t\t++currentRound\r\n\r\n\t\t\tconst value = generateValue(set)\r\n\t\t\tcoins = dispense(set.currency, value)\r\n\t\t\tdish = new DishComponent(coins)\r\n\t\t\tdocument.body.insertBefore(dish.element, bottomBar)\r\n\t\t\tdish.generate()\r\n\t\t} else {\r\n\t\t\tdocument.body.removeChild(bottomBar)\r\n\t\t\tdocument.body.append(scoreboard.element)\r\n\t\t\tscoreboard.generate()\r\n\t\t}\r\n\t})\r\n\r\n\tconst frag = document.createDocumentFragment()\r\n\tfrag.append(topBar, dish.element, bottomBar)\r\n\r\n\treturn {\r\n\t\telement: frag,\r\n\t\tattached: () => dish.generate()\r\n\t}\r\n}\r\n\r\nfunction generateValue(set) {\r\n\treturn Math.round(Math.random()*(set.weight - 2)) + 1\r\n}","import {NotFoundError} from './errors'\r\nimport {fetchIndex} from './index'\r\nimport {fetch} from './fetch'\r\n\r\n/**\r\n * @typedef {{\r\n * \tweight: number\r\n * \tcurrency: {\r\n * \t\tname: string\r\n * \t\tvalue: number\r\n * \t\tsize: number\r\n * \t\timages: {\r\n * \t\t\tfront: string\r\n * \t\t\tback: string\r\n * \t\t}\r\n * \t}[]\r\n * }} CurrencyResponse\r\n */\r\n\r\n/**\r\n * \r\n * @param {string} region \r\n * @returns {Promise<CurrencyResponse>}\r\n */\r\nexport async function fetchCurrency(region) {\r\n\tconst index = await fetchIndex()\r\n\t\r\n\tfor(let i in index.currencies) {\r\n\t\tconst currency = index.currencies[i]\r\n\t\tif(region === currency.code) {\r\n\t\t\treturn await fetch(currency.url)\r\n\t\t}\r\n\t}\r\n\r\n\tthrow new NotFoundError(`Region ${region} not found`)\r\n}"],"sourceRoot":""}