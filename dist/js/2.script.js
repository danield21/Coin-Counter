(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{7:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var s=n(0),i=n(2),r=n(1);async function o(e){const t=await Object(i.a)();for(let n in t.languages){const s=t.languages[n];if(e===s.code)return await Object(r.a)(s.url)}throw new s.a(`Locale ${e} not found`)}},8:function(e,t,n){"use strict";n.r(t);class s{constructor(e){this.element=document.createElement("div"),this.skipFlip=!1,this.element.setAttribute("class","coin"),this.element.setAttribute("style",`width: ${e.size}mm; height: ${e.size}mm;`),this.element.append(i(e,"front")),this.element.append(i(e,"back"))}flip(){this.skipFlip?this.skipFlip=!1:this.element.classList.toggle("coin--face-down")}rotate(e){const t=this.element.firstChild,n=t.nextSibling;t.firstChild.setAttribute("style",`transform: rotate(${e}deg)`),n.firstChild.setAttribute("style",`transform: rotate(${e}deg)`)}}function i(e,t){if(!(t in e.images))throw new TypeError('Excepted only the strings "front" or "back');const n=document.createElement("div");n.setAttribute("class",`coin__${t}`);const s=document.createElement("img");return s.setAttribute("src",e.images[t]),s.setAttribute("alt",e.name),s.setAttribute("class","coin__img"),n.append(s),n}class r{constructor(e){this.element=document.createElement("div"),this.element.setAttribute("class","scoreboard"),this.rounds=[],this.start=new Date,this.messages=e}add(e,t){this.rounds.push({value:e,coins:t})}generate(){const e=new Date;let t=0;const n=document.createElement("div");n.setAttribute("class","scoreboard__history");for(let e=0;e<this.rounds.length;++e){let{value:i,coins:r}=this.rounds[e];const a=document.createElement("div");a.setAttribute("class","scoreboard__row");let l=0;for(let e=0;e<r.length;++e){l+=r[e].value;const t=new s(r[e]);a.append(t.element)}const u=l-i;t+=u,n.append(a,c(this.messages.get("your-answer")+": "+o(i)),c(this.messages.get("correct-answer")+": "+o(l)),c(this.messages.get("difference")+": "+o(u)))}const i=e-this.start,r=document.createElement("div");r.setAttribute("class","scoreboard__score"),r.append(c(this.messages.get("final-difference")+": "+o(t)),c(this.messages.get("final-time")+": "+function(e){let t=e;const n=t%1e3,s=(t=Math.floor(t/1e3))%60,i=(t=Math.floor(t/60))%60,r=Math.floor(t/60);let o="";r>0&&(o+=r+":");i>0&&(o+=r>0?i<10?`0${i}:`:`${i}:`:i+":");o+=i>0?s<10?`0${s}:`:`${s}.`:s+".";return o+=n<10?`00${n}`:n<100?`0${n}`:""+n}(i)));const a=document.createElement("button");a.setAttribute("class","scoreboard__button"),a.append(document.createTextNode(this.messages.get("try-again"))),a.addEventListener("click",e=>{e.preventDefault(),window.location.reload()}),this.element.append(r,a,n)}}function o(e){const t=Math.abs(e),n=(""+t).split("");return t<100&&n.unshift("0"),t<10&&n.unshift("0"),e<0&&n.unshift("-"),n.splice(n.length-2,0,"."),n.join("")}function c(e){const t=document.createElement("span");return t.setAttribute("class","scoreboard__text"),t.append(e),t}class a{constructor(e,t){this.x=e,this.y=t}add(e){return new a(this.x+e.x,this.y+e.y)}subtract(e){return new a(this.x-e.x,this.y-e.y)}mutliply(e){return new a(this.x*e,this.y*e)}divide(e){return new a(this.x/e,this.y/e)}}a.ZERO=new a(0,0);class l{constructor(e){this.current=0,this.max=e,this.triggered=!1,this.callbacks=[]}count(){if(!this.triggered)if(this.current>=this.max){this.triggered=!0;for(let e=0;e<this.callbacks.length;++e)try{this.callbacks[e]()}catch(e){console.error(e)}}else this.current++}reset(){this.triggered=!1,this.current=0}onLimit(e){"function"==typeof e&&this.callbacks.push(e)}}const u=1;class d{constructor(e,t){this.element=document.createElement("div"),this.element.appendChild(e),this.element.setAttribute("class","draggable"),this.movement=new l(u),m(this.element,t);const n=new Map,s={};s.move=function(e,t,n){return function(s){s.preventDefault();const i=h(s);var r=t.get(s.pointerId);if(null==r)return;r.current=i.subtract(r.diff);let o=a.ZERO;t.forEach(({current:e})=>{o=o.add(e)});const c=o.divide(t.size);m(e,c),n.count()}}(this.element,n,this.movement),s.up=p(this.element,n,this.movement,!0,s),s.cancel=p(this.element,n,this.movement,!1,s),this.element.addEventListener("pointerdown",function(e,t,n){return function(s){s.preventDefault(),0==t.size&&(window.addEventListener("pointermove",n.move,{passive:!1}),window.addEventListener("pointerup",n.up,{passive:!1}),window.addEventListener("pointercancel",n.cancel,{passive:!1}),document.body.setAttribute("touch-action","none"));const i=function(e){const t=e.getBoundingClientRect(),n=new a(t.left+window.scrollX,t.top+window.scrollY),s=e.parentElement.getBoundingClientRect(),i=new a(s.left+window.scrollX,s.top+window.scrollY);return n.subtract(i)}(this),r=h(s),o=r.subtract(i);e.classList.add("draggable--lifted"),t.set(s.pointerId,{diff:o,current:r})}}(this.element,n,s))}onDrag(e){this.movement.onLimit(e)}onClick(e){this.element.addEventListener("click",e)}}function m(e,t){e.setAttribute("style",`transform: translateY(${t.y}px) translateX(${t.x}px)`)}function h(e){return new a(e.pageX,e.pageY)}function p(e,t,n,s,i){return function(r){r.preventDefault(),t.delete(r.pointerId),t.size>0||("mouse"!==r.pointerType&&n.triggered&&e.click(),window.removeEventListener("pointermove",i.move),window.removeEventListener("pointerup",i.up),window.removeEventListener("pointercancel",i.cancel),document.body.removeAttribute("touch-action"),e.classList.remove("draggable--lifted"),s&&"vibrate"in window.navigator&&window.navigator.vibrate(10),n.reset())}}class f{constructor(e){this.element=document.createElement("div"),this.element.setAttribute("class","dish"),this.coins=e}generate(){const e=document.createDocumentFragment();let t=this.value;const n=this.element.offsetHeight,i=this.element.offsetWidth,r=document.createElement("div");r.setAttribute("style","width: 100mm;"),this.element.append(r);const o=r.offsetWidth/100;this.element.removeChild(r);for(let r=0;r<this.coins.length;++r){if(this.coins[r].value>t){r++;continue}const c=this.coins[r].size*o,a=Math.sqrt(2*c*c),l={x:(i>a?i-a:0)*Math.random(),y:(n>a?n-a:0)*Math.random(),rotate:360*Math.random()},u=new s(this.coins[r]);u.rotate(l.rotate),Math.random()>=.5&&u.flip();const m=new d(u.element,l);m.element.classList.add("coin-wrapper"),m.onDrag(e=>{u.skipFlip=!0;let t=m.element.nextElementSibling;for(;null!=t;)this.element.insertBefore(t,m.element),t=t.nextElementSibling}),m.onClick(e=>{u.flip()}),e.append(m.element),t-=this.coins[r].value}this.element.append(e)}}function b(e,t){const n=e.concat();n.sort((e,t)=>t.value-e.value);const s=[];let i=0;for(;t>0&&i<n.length;)n[i].value>t?i++:(s.push(n[i]),t-=n[i].value);return s}var g=n(0),w=n(2),v=n(1);var y=n(7);function E(e){const t=new Map;if(null==e)return t;for(let n in e)t.set(n,e[n]);return t}n.d(t,"default",function(){return x});const A=10;async function x({locale:e,region:t}){localStorage.setItem("lang",e);const n=await Object(y.a)(e),s=await async function(e){const t=await Object(w.a)();for(let n in t.currencies){const s=t.currencies[n];if(e===s.code)return await Object(v.a)(s.url)}throw new g.a(`Region ${e} not found`)}(t),i=await async function(e){const t=await Object(y.a)(e);return E(await Object(v.a)(t.url))}(e),o=new r(i),c=_(s);let a=b(s.currency,c),l=new f(a),u=1;const d=document.createElement("div");d.setAttribute("class","exercise__top");const m=document.createElement("h1");m.setAttribute("class","exercise__header"),d.append(m);const h=document.createElement("a");h.setAttribute("href","/"),h.append(document.createTextNode(n.title)),m.append(h);const p=document.createElement("form");p.setAttribute("class","exercise__bottom");const x=document.createElement("input");x.setAttribute("name","value"),x.setAttribute("type","number"),x.setAttribute("min","0"),x.setAttribute("step","0.01"),x.setAttribute("class","exercise__input");const k=document.createElement("button");k.setAttribute("class","exercise__button"),k.append(document.createTextNode(i.get("submit"))),p.append(x,k),p.addEventListener("submit",e=>{e.preventDefault();const t=+x.value.replace(/\./,"");if(o.add(t,a),x.value="",document.body.removeChild(l.element),u<A){++u;const e=_(s);a=b(s.currency,e),l=new f(a),document.body.insertBefore(l.element,p),l.generate()}else document.body.removeChild(p),document.body.append(o.element),o.generate()});const L=document.createDocumentFragment();return L.append(d,l.element,p),{element:L,attached:()=>l.generate()}}function _(e){return Math.round(Math.random()*(e.weight-2))+1}}}]);
//# sourceMappingURL=2.script.js.map