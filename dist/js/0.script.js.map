{"version":3,"sources":["webpack:///./web/js/page/chooseRegion.js","webpack:///./web/js/api/language.js"],"names":["__webpack_require__","r","__webpack_exports__","d","chooseLanguage","_api_language__WEBPACK_IMPORTED_MODULE_0__","async","locale","localStorage","setItem","language","Object","frag","document","createDocumentFragment","h1","createElement","setAttribute","append","createTextNode","title","i","currencies","currency","link","code","element","fetchLanguage","_errors__WEBPACK_IMPORTED_MODULE_0__","_index__WEBPACK_IMPORTED_MODULE_1__","_fetch__WEBPACK_IMPORTED_MODULE_2__","index","languages","url"],"mappings":"wFAAAA,EAAAC,EAAAC,GAAAF,EAAAG,EAAAD,EAAA,4BAAAE,IAAA,IAAAC,EAAAL,EAAA,GAEeM,eAAAF,GAAAG,OAA+BA,IAC9CC,aAAAC,QAAA,OAAAF,GACA,MAAAG,QAAwBC,OAAAN,EAAA,EAAAM,CAAaJ,GAErCK,EAAAC,SAAAC,yBAEAC,EAAAF,SAAAG,cAAA,MACAD,EAAAE,aAAA,yBACAF,EAAAG,OAAAL,SAAAM,eAAAT,EAAAU,QACAR,EAAAM,OAAAH,GAEA,QAAAM,KAAAX,EAAAY,WAAA,CACA,MAAAC,EAAAb,EAAAY,WAAAD,GAEAG,EAAAX,SAAAG,cAAA,KACAQ,EAAAN,OAAAL,SAAAM,eAAAI,EAAAH,QACAI,EAAAP,aAAA,uBACAO,EAAAP,aAAA,WAAgCV,KAAUgB,EAAAE,QAE1Cb,EAAAM,OAAAM,GAGA,OAASE,QAAAd,oCCxBTZ,EAAAG,EAAAD,EAAA,sBAAAyB,IAAA,IAAAC,EAAA5B,EAAA,GAAA6B,EAAA7B,EAAA,GAAA8B,EAAA9B,EAAA,GAqBOM,eAAAqB,EAAApB,GACP,MAAAwB,QAAqBpB,OAAAkB,EAAA,EAAAlB,GAErB,QAAAU,KAAAU,EAAAC,UAAA,CACA,MAAAtB,EAAAqB,EAAAC,UAAAX,GACA,GAAAd,IAAAG,EAAAe,KACA,aAAgBd,OAAAmB,EAAA,EAAAnB,CAAKD,EAAAuB,KAIrB,UAAWL,EAAA,YAAwBrB","file":"0.script.js","sourcesContent":["import {fetchLanguage} from '../api/language'\r\n\r\nexport default async function chooseLanguage({locale}) {\r\n\tlocalStorage.setItem('lang', locale)\r\n\tconst language = await fetchLanguage(locale)\r\n\r\n\tconst frag = document.createDocumentFragment()\r\n\r\n\tconst h1 = document.createElement('h1')\r\n\th1.setAttribute('class', 'index__header')\r\n\th1.append(document.createTextNode(language.title))\r\n\tfrag.append(h1)\r\n\r\n\tfor(let i in language.currencies) {\r\n\t\tconst currency = language.currencies[i]\r\n\r\n\t\tconst link = document.createElement('a')\r\n\t\tlink.append(document.createTextNode(currency.title))\r\n\t\tlink.setAttribute('class', 'index__link')\r\n\t\tlink.setAttribute('href', `/${locale}/${currency.code}`)\r\n\r\n\t\tfrag.append(link)\r\n\t}\r\n\r\n\treturn {element: frag}\r\n}","import {NotFoundError} from './errors'\r\nimport {fetchIndex} from './index'\r\nimport {fetch} from './fetch'\r\n\r\n/**\r\n * @typedef {{\r\n * \ttitle: string\r\n * \turl: string\r\n * \tcurrencies: {\r\n * \t\tcode: string\r\n * \t\ttitle: string\r\n * \t\turl: string\r\n * \t}[]\r\n * }} LanguageResponse\r\n */\r\n\r\n/**\r\n * \r\n * @param {string} locale \r\n * @returns {Promise<LanguageResponse>}\r\n */\r\nexport async function fetchLanguage(locale) {\r\n\tconst index = await fetchIndex()\r\n\t\r\n\tfor(let i in index.languages) {\r\n\t\tconst language = index.languages[i]\r\n\t\tif(locale === language.code) {\r\n\t\t\treturn await fetch(language.url)\r\n\t\t}\r\n\t}\r\n\r\n\tthrow new NotFoundError(`Locale ${locale} not found`)\r\n}"],"sourceRoot":""}